<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>~/ • Learning Assembly</title><link href=https://gatunet.github.io/tabibito/atom.xml rel=alternate title=~/ type=application/atom+xml><link href=https://gatunet.github.io/tabibito/custom_subset.css rel=stylesheet><link href=https://gatunet.github.io/tabibito/main.css media=screen rel=stylesheet><meta content="tabi is a simple personal site and blogging theme for Zola." name=description><meta content="index, nofollow" name=robots><meta content=~/ property=og:title><meta content=article property=og:type><meta content=https://gatunet.github.io/tabibito/blog/assembly/ property=og:url><meta content="tabi is a simple personal site and blogging theme for Zola." property=og:description><meta content=~/ property=og:site_name><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;script-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com" http-equiv=Content-Security-Policy><script src=https://gatunet.github.io/tabibito/js/initialize_theme_min.js></script><script defer src=https://gatunet.github.io/tabibito/js/main_min.js></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://gatunet.github.io/tabibito>~/</a></div><div class="nav-navs socials"><ul><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer" href=https://github.com/gatunet/ target=_blank> <img alt=github src=https://gatunet.github.io/tabibito/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer" href=https://hachyderm.io/@gartunius target=_blank> <img alt=mastodon src=https://gatunet.github.io/tabibito/social_icons/mastodon.svg title=mastodon> </a></ul></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://gatunet.github.io/tabibito/blog>blog</a><li><a class="nav-links no-hover-padding" href=https://gatunet.github.io/tabibito/archive>archive</a><li><a class="nav-links no-hover-padding" href=https://gatunet.github.io/tabibito/projects>projects</a><li class=theme-switcher-wrapper><div class=theme-switcher></div></ul></div></nav></header><div class=content><main><article><div class=article-title>Learning Assembly</div><ul class=meta><li>4th Apr 2021 •<li title="1237 words"> 7 min read</ul><section class=body><p>So, when doing the <a href=https://exploit.education/phoenix/ rel=noopener target=_blank>Exploit-Education Phoenix</a> challenge, wich is the "spiritual successor" to the Protostar challenges that was recommended by <a href=https://liveoverflow.com/start-hacking/ rel=noopener target=_blank>Live Overflow</a> I felt like learning some assembly.<h3 id=some-things-to-know><a aria-label="Anchor link for: some-things-to-know" class=zola-anchor href=#some-things-to-know>🔗</a>Some things to know :</h3><ul><li>First is good to know that assembly is a <em>low-level</em> language, wich means that it's very close to the CPU, it's not machine code but it's very close as you'll see.<li>Also, there are a lot of assembly "flavors" and I <strong>do not</strong> cover all them here, the one wich I cover some basics of is the <a href=https://www.nasm.us/ rel=noopener target=_blank>NASM</a><li>Nasm can be installed in any O.S, but the syscalls are different per O.S, so the code in here will be only useful to <strong>linux machines</strong><li>And here's a <a href=https://syscalls.kernelgrok.com/ rel=noopener target=_blank>linux x86 syscall table</a>, alongside with a good <a href=https://theasciicode.com.ar/ rel=noopener target=_blank>ascii table</a>.</ul><p>The sequence of commands bellow is used to run <a href=https://en.wikipedia.org/wiki/X86_assembly_language rel=noopener target=_blank>x86 assembly</a> code:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> nasm<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> elf <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program.asm<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> ld<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> elf_i386 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program.o<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./<span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span></code></pre><p>Just replace the [<strong>asm program</strong>] with the name of your program, or you could use this script:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">!/usr/bin/env bash</span><span class="z-comment z-line z-number-sign z-shell">
</span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">File</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">1</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-keyword z-operator z-substitution z-shell">/</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-constant z-character z-escape z-shell">\.</span>asm<span class="z-keyword z-operator z-substitution z-shell">/</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span></span>

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nasm</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> elf<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>F</span> dwarf<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">1</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ld</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> elf_i386 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span>.o<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./<span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span></span>

<span class="z-keyword z-control z-conditional z-if z-shell">if</span> <span class="z-support z-function z-test z-begin z-shell">[</span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>n</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">2</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-support z-function z-test z-end z-shell">]</span></span> <span class="z-keyword z-operator z-logical z-and z-shell">&&</span> <span class="z-support z-function z-test z-begin z-shell">[</span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">2</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-keyword z-operator z-logical z-shell">==</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>debug<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-support z-function z-test z-end z-shell">]</span></span>
<span class="z-keyword z-control z-conditional z-then z-shell">then</span>
	<span class="z-variable z-other z-readwrite z-assignment z-shell">filename</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">File</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>Debugg<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mkdir</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">filename</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mv</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span>.o<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">filename</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mv</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">filename</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
<span class="z-keyword z-control z-conditional z-else z-shell">else</span>
	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span>.o<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">File</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
<span class="z-keyword z-control z-conditional z-end z-shell">fi</span>
</span></code></pre><p>Basically it is a shell script that does the same thing but less messy, and it can create a file for debugging ( wich is created anyway with the commands above, but it does in a more organized way ) . It's used like this:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./runasm.sh <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./runasm.sh <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>asm program<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> debug</span>
</span></code></pre><p>The 'debug' option creates a file called <strong>'[asm program]Debugg'</strong>, which'll contain the files from both operations, as if you had run both commands yourself, and you can use the executable ( the file without an extension ) with <a href=https://www.gnu.org/software/gdb/ rel=noopener target=_blank>GDB</a> or <a href=https://www.radare.org/r/ rel=noopener target=_blank>Radare</a> to debug your program.<h2 id=registers><a aria-label="Anchor link for: registers" class=zola-anchor href=#registers>🔗</a>Registers</h2><p>So the cpu has registers wich are "memory slots" with ( usually today ) <strong>64 - bits</strong> of space that holds values, that are going to be used by the program, bellow there's a list with some registers.<pre class=z-code><code><span class="z-text z-plain">| 64-bit | 32-bit | 16-bit | high 8-bit | lower 8-bit |
| ------ | ------ | ------ | ---------- | ----------- |
| RAX    | EAX    | AX     | AH         | AL          |
| RDX    | EDX    | DX     | DH         | DL          |
| RSI    | ESI    | SI     | N/A        | SIL         |
| RSP    | ESP    | SP     | N/A        | SPL         |
| RBP    | EBP    | BP     | N/A        | BPL         |
| RIP    | EIP    | IP     | N/A        | N/A         |

</span></code></pre><h3 id=full-register-list><a aria-label="Anchor link for: full-register-list" class=zola-anchor href=#full-register-list>🔗</a>Full Register List:</h3><pre class=z-code><code><span class="z-text z-plain">| 64-bit | 32-bit | 16-bit | high 8-bit | lower 8-bit |
| ------ | ------ | ------ | ---------- | ----------- |
| RAX    | EAX    | AX     | AH         | AL          |
| RBX    | EBX    | BX     | BH         | BL          |
| RCX    | ECX    | CX     | CH         | CL          |
| RDX    | EDX    | DX     | DH         | DL          |
| RSI    | ESI    | SI     | N/A        | SIL         |
| RDI    | EDI    | DI     | N/A        | DIL         |
| RSP    | ESP    | SP     | N/A        | SPL         |
| RBP    | EBP    | BP     | N/A        | BPL         |
| R8     | R8D    | R8W    | N/A        | R8B         |
| R9     | R9D    | R9W    | N/A        | R9B         |
| R10    | R10D   | R10W   | N/A        | R10B        |
| R11    | R11D   | R11W   | N/A        | R11B        |
| R12    | R12D   | R12W   | N/A        | R12B        |
| R13    | R13D   | R13W   | N/A        | R13B        |
| R14    | R14D   | R14W   | N/A        | R14B        |
| R15    | R15D   | R15W   | N/A        | R15B        |
| RIP    | EIP    | IP     | N/A        | N/A         |

</span></code></pre><p>As you can see there're registers for different sizes of memory, but in fact they are just smaller pieces of the larger registers, for example the <strong>'EAX'</strong> is just one half of the <strong>'RAX'</strong>, they're laid down as shown below:<pre class=z-code><code><span class="z-text z-plain">┌───────────────────────────────────────────────────────────────────┐
│                                32-bit
│                                ┌──────────────────────────────────┐
│                                │                16-bit
│                                │                ┌─────────────────┐
│                                │                8H-bit   8L-bit
│                                │                ┌────────┬────────┐
│                                │                │        │        │
</span></code></pre><p>So when you call for the content of <strong>'RAX'</strong> it'll get you a 64-bit value, and if in a debugger you call for the content of <strong>'EAX'</strong> it'll get you a 32-bit value wich'll be exact the same as the lower 32-bit of the 64-bit value from <strong>'RAX'</strong><h2 id=instructions><a aria-label="Anchor link for: instructions" class=zola-anchor href=#instructions>🔗</a>Instructions</h2><p>As any other programming language, assembly has instructions that tells the computer what to do, <a href=https://www.aldeid.com/wiki/X86-assembly/Instructions rel=noopener target=_blank>here</a> you can find a list with all the x86 instructions, and the respective sytax for each one. And here's an 'hello world' code example in x86 assembly:<pre class="language-asm z-code" data-lang=asm><code class=language-asm data-lang=asm><span class="z-source z-assembly"><span class="z-support z-function z-directive z-assembly">SECTION</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span>
<span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">g</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-support z-function z-directive z-assembly">db</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-string z-assembly">'Hello World'</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-hexadecimal z-assembly">0Ah</span>

<span class="z-support z-function z-directive z-assembly">SECTION</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">x</span><span class="z-entity z-name z-function z-assembly">t</span>
<span class="z-support z-function z-directive z-assembly">global</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">t</span>

<span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">:</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">edx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">13</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">ecx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">g</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">ebx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">eax</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">4</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">int</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-constant z-character z-hexadecimal z-assembly">80h</span><span class="z-comment z-assembly">       ; does the syscall</span>

<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">ebx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">0</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-variable z-parameter z-register z-assembly">eax</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span>
<span class="z-entity z-name z-function z-assembly">	</span><span class="z-keyword z-control z-assembly">int</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-entity z-name z-function z-assembly">	</span><span class="z-constant z-character z-hexadecimal z-assembly">80h</span><span class="z-comment z-assembly">       ; does the syscall</span>
</span></code></pre><p>And I'll explain line by line the 'hello world' program. First we'll use the <code>SECTION</code> instruction, and to understand that better, we'll have to see how the memory is laid out in the computer.<h1 id=random-access-memory><a aria-label="Anchor link for: random-access-memory" class=zola-anchor href=#random-access-memory>🔗</a>Random Access Memory</h1><p>This is how the operational systems (usually) organize memory, they separate it in different sections, each one with a different pourpuse.<pre class=z-code><code><span class="z-text z-plain">0xffff
+---------------------------+
| STACK (high addresses)    | The stack holds values when a `call` happens,
|                           | or when the programmer interacts with the stack.
+---------------------------+
|                           |
| FREE SPACE (for growth)   |
|                           |
+---------------------------+
| HEAP                      | Then we have the heap, wich is the dynamic memory
|                           | region of your computer, that is managed entirely 
|                           | by the programmer.
+---------------------------+
| BSS (unitialized data)    | And then there's the bss section wich holds 
|                           | uninitialised variables.
+---------------------------+
| DATA (initialized data)   | The data section holds initialised variables.
|                           |
+---------------------------+
| TEXT (low addresses)      | And the text section holds our code
|                           |
+---------------------------+
0x0000
</span></code></pre><h1 id=stack><a aria-label="Anchor link for: stack" class=zola-anchor href=#stack>🔗</a>Stack</h1><p>The stack is a region in memory that holds values, following a <em>LIFO</em> (Last In First Out) structure, it's controlled by the instructions <strong>push</strong> and <strong>pop</strong>, with the syntax shown bellow:<pre class="language-asm z-code" data-lang=asm><code class=language-asm data-lang=asm><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">push</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">[</span><span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">l</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-source z-assembly">]</span>
<span class="z-keyword z-control z-assembly">push</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-hexadecimal z-assembly">0x60</span><span class="z-comment z-assembly"> ; decrements the stack pointer(the stack grows down)</span>

<span class="z-keyword z-control z-assembly">pop</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">[</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">g</span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-source z-assembly">]</span>
<span class="z-keyword z-control z-assembly">pop</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">eax</span><span class="z-comment z-assembly">  ; increments the stack pointer</span>
</span></code></pre><p>Both the <strong>rsp</strong> and <strong>rbp</strong> and the respectively lower ones(esp ebp) are responsible by the stack. The <em>rsp</em>, the <strong>stack pointer</strong> points to the top of the stack(lower address) and the <em>rbp</em>, the <strong>base pointer</strong> points to the base of the stack(higher address).<h1 id=heap><a aria-label="Anchor link for: heap" class=zola-anchor href=#heap>🔗</a>Heap</h1><p>The heap is a region that it's mostly used by "more high level code", like c with the <strong>malloc</strong> function for example. And since it's not needed for the Hello World program, I'll skip it for now.<h1 id=bss><a aria-label="Anchor link for: bss" class=zola-anchor href=#bss>🔗</a>Bss</h1><p>As said the <strong>bss</strong> section holds the uninitialides variables, and it does with the use of the syntax bellow:<pre class="language-asm z-code" data-lang=asm><code class=language-asm data-lang=asm><span class="z-source z-assembly"><span class="z-support z-function z-directive z-assembly">SECTION</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">b</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">s</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">1</span><span class="z-entity z-name z-function z-assembly">:</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">RESB</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-comment z-assembly"> ; 1 byte</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">2</span><span class="z-entity z-name z-function z-assembly">:</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">RESW</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-comment z-assembly"> ; 1 word</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">3</span><span class="z-entity z-name z-function z-assembly">:</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">RESD</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-comment z-assembly"> ; 1 double word</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">4</span><span class="z-entity z-name z-function z-assembly">:</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">RESQ</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-comment z-assembly"> ; 1 double precision float (quad word)</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">5</span><span class="z-entity z-name z-function z-assembly">:</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">REST</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-comment z-assembly"> ; 1 extended precision float</span>
<span class="z-support z-function z-directive z-assembly">[variable name]</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">[</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">z</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-source z-assembly">]</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">[</span><span class="z-entity z-name z-function z-assembly">q</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">y</span><span class="z-source z-assembly">]</span>
</span></code></pre><h1 id=data><a aria-label="Anchor link for: data" class=zola-anchor href=#data>🔗</a>Data</h1><p>Then there's the <strong>data</strong> section, the section wich stores our variables following the syntax bellow:<pre class="language-asm z-code" data-lang=asm><code class=language-asm data-lang=asm><span class="z-source z-assembly"><span class="z-support z-function z-directive z-assembly">SECTION</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">DB</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">64</span><span class="z-comment z-assembly">  ; byte, referred to its location as var, containing the value 64.</span>
<span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">2</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">DB</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">?</span><span class="z-comment z-assembly">   ; uninitialized byte, referred to its location as var2.</span>
<span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">DB</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">10</span><span class="z-comment z-assembly">  ; byte with no label, containing the value 10. Its location is var2 + 1.</span>
<span class="z-entity z-name z-function z-assembly">X</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">DW</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">?</span><span class="z-comment z-assembly">   ; 2-byte(word) uninitialized value, referred to its location as X.</span>
<span class="z-entity z-name z-function z-assembly">Y</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-support z-function z-directive z-assembly">DD</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">300</span><span class="z-comment z-assembly"> ; 4-byte(double word), its location is Y, initialized to 300.</span>
</span></code></pre><h1 id=text><a aria-label="Anchor link for: text" class=zola-anchor href=#text>🔗</a>Text</h1><p>And the text section, the section wich stores the code, you use't just like I did with the <strong>hello world</strong> example above:<pre class="language-asm z-code" data-lang=asm><code class=language-asm data-lang=asm><span class="z-source z-assembly"><span class="z-support z-function z-directive z-assembly">SECTION</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">x</span><span class="z-entity z-name z-function z-assembly">t</span>
<span class="z-support z-function z-directive z-assembly">global</span> <span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">t</span>

<span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">:</span>
<span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">ebx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">0</span>
<span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">eax</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span>
<span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-keyword z-control z-assembly">int</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-hexadecimal z-assembly">80h</span><span class="z-comment z-assembly">       ; does the syscall	</span>
</span></code></pre><p>I'll finish it latter :P<h2 id=references><a aria-label="Anchor link for: references" class=zola-anchor href=#references>🔗</a>References</h2><ul><li><a href=https://www.aldeid.com/wiki/X86-assembly/Instructions rel=noopener target=_blank>Aldeid assembly x86 instructions</a><li><a href=https://asmtutor.com rel=noopener target=_blank>ASM tutor</a><li><a href=https://derekmaciel.com/2017-02-12/beginners-assembly-part1/ rel=noopener target=_blank>A Beginner's Guide to x86 Assembly</a></ul></section></article></main></div><footer><section><div class=credits><small>Powered by <a href=https://www.getzola.org target=_blank>Zola</a> & <a href=https://github.com/welpo/tabi target=_blank>tabi</a></small></div></section></footer>